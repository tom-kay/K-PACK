<?xml version="1.0" encoding="utf-8"?>
<SmartSqlMap Scope="MenuMng" xmlns="http://SmartSql.net/schemas/SmartSqlMap.xsd">
	<Statements>
		<Statement Id="SelectAdd">
			, `menu`.`DelYn`
			, `menu`.`CreateDt`
			, `menu`.`UpdateDt`
			, `menu`.`DeleteDt`
		</Statement>
		
		<Statement Id="selectMenuMasterList">
			select `menu`.`MenuId`,
			`menu`.`ParentId`,
			`menu`.`MenuName`,
			`menu`.`MenuType`,
			`menu`.`Namespace`,
			`menu`.`FormName`,
			`menu`.`OrderSeq`,
			`menu`.`DepthNo`,
			`menu`.`UseYn`
			<Include Prepend="" RefId="SelectAdd"/>
			from tb_menumaster AS menu
			where UseYn = 'Y'
			and DelYn != 'Y'
			order by depthNo, orderseq;
		</Statement>

		<Statement Id="selectMenuMasterListByParentKey">
			select `menu`.`MenuId`,
			`menu`.`ParentId`,
			`pmenu`.`MenuName` as ParentName,
			`menu`.`MenuName`,
			`menu`.`MenuType`,
			`typecd`.`name` as MenuTypeName,
			`menu`.`Namespace`,
			`menu`.`FormName`,
			`menu`.`OrderSeq`,
			`menu`.`DepthNo`,
			`menu`.`UseYn`
			<Include Prepend="" RefId="SelectAdd"/>
			from tb_menumaster AS menu
			left join tb_menumaster AS pmenu
			on pmenu.MenuId = menu.ParentId
			left join tb_codedetail	AS typecd
			on typecd.MasterCode = 'MENUTYPE'
			and typecd.code = menu.menutype
			where 1=1
			and ifnull(menu.ParentId,'') = @ParentId
			order by depthNo, orderseq;
		</Statement>

		<Statement Id="selectMenuMasterByKey">
			select `menu`.`MenuId`,
			`menu`.`ParentId`,
			`pmenu`.`MenuName` as ParentName,
			`menu`.`MenuName`,
			`menu`.`MenuType`,
			`typecd`.`name` as MenuTypeName,
			`menu`.`Namespace`,
			`menu`.`FormName`,
			`menu`.`OrderSeq`,
			`menu`.`DepthNo`,
			`menu`.`UseYn`
			<Include Prepend="" RefId="SelectAdd"/>
			from tb_menumaster AS menu
			left join tb_menumaster AS pmenu
			on pmenu.MenuId = menu.ParentId
			left join tb_codedetail	AS typecd
			on typecd.MasterCode = 'MENUTYPE'
			and typecd.code = menu.menutype
			where 1=1
			and ifnull(menu.MenuId,'') = @MenuId
			order by depthNo, orderseq;
		</Statement>
	</Statements>
</SmartSqlMap>